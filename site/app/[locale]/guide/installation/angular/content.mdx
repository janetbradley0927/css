import ProgressiveRenderingIntro from '../../rendering-modes/components/ProgressiveRenderingIntro.mdx'

<ProgressiveRenderingIntro img={{
    ...require('~/site/public/images/angular-dev.png').default,
    dark: require('~/site/public/images/angular-dev@dark.png').default,
    alt: 'Angular and Master CSS',
    width: 665, height: 400 }} />

---

## Quick start
<StepSection>
    <Step $row>
        <StepL>
            ### <StepNum />Clone the example
            Copy-paste the commands to quickly start using the https://angular.pr.rc.css.master.co example.

            You can skip all [installation](#installation) steps.
        </StepL>
        <StepR>
            ```bash name=Terminal
            npm create @master/css@rc my-app --example angular
            cd my-app
            npm run dev
            ```
        </StepR>
        <StepEnd/>
    </Step>
</StepSection>

---

## Installation
<StepSection>
    <Step $row>
        <StepL>
            ### <StepNum />Create a project
            If you don&#39;t have a Angular project, create one first. It&#39;s recommended to refer [Angular CLI](https://angular.io/cli).
        </StepL>
        <StepR>
            ```bash name=Terminal
            ng new my-app
            cd my-app
            ```
        </StepR>
    </Step>
    <Step $row>
        <StepL>
            ### <StepNum />Create a configuration file
            Run the command to create a [master.css.js](/guide/configuration) file.
        </StepL>
        <StepR>
            ```bash action=create
            @master/css@rc
            ```
        </StepR>
    </Step>
    <Step $row>
        <StepL>
            ### <StepNum />Install Master CSS
            Install Master CSS Server into your project via package managers.
        </StepL>
        <StepR>
            ```bash action=install
            @master/css-runtime@rc @master/css-server@rc
            ```
        </StepR>
    </Step>
    <Step $row>
        <StepL>
            ### <StepNum />Set up CSS runtime engine
            Initialize the runtime engine with your configuration.
        </StepL>
        <StepR>
            ```ts name=src/main.ts
            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
            import { AppModule } from './app/app.module';
            import { initCSSRuntime } from '@master/css-runtime'; // [!code ++]
            import config from '../master.css'; // [!code ++]

            initCSSRuntime(config); // [!code ++]

            platformBrowserDynamic().bootstrapModule(AppModule)
                .catch(err => console.error(err));
            ```
        </StepR>
    </Step>
    <Step $row>
        <StepL>
            ### <StepNum />Set up Angular Universal
            Run the command to create a Angular server-side application.
        </StepL>
        <StepR>
            ```bash name=Terminal
            npx ng add @nguniversal/express-engine
            ```
        </StepR>
    </Step>
    <Step $row>
     <StepL>
            ### <StepNum />Set up CSS pre-rendering
            All CSS rules are pre-rendered and injected into HTML on the server side or at build time.
        </StepL>
        <StepR>
            ```ts name=server.ts
            import { render } from '@master/css-server'; // [!code ++]
            import config from './master.css'; // [!code ++]
            …
            export function app() {
                …
                server.get('*', (req, res) => {
                    …
                    res.render(indexHtml, { req, providers: [{ provide: APP_BASE_HREF, useValue: req.baseUrl }] }); // [!code --]
                    res.render(indexHtml, { req, providers: [{ provide: APP_BASE_HREF, useValue: req.baseUrl }] }, // [!code ++]
                        (error: Error, html: string) => { // [!code ++]
                            error // [!code ++]
                                ? console.error(error) // [!code ++]
                                : res.send(render(html, config).html) // [!code ++]
                        } // [!code ++]
                    ) // [!code ++]
                }); // [!code ++]
            }
            ```
        </StepR>
    </Step>
    <Step $row>
        <StepL>
            ### <StepNum />Launch server
            Run the development server.
        </StepL>
        <StepR>
            ```bash name=Terminal
            npm run dev:ssr
            ```
        </StepR>
    </Step>
    <Step>
        ### <StepNum />Start using Master CSS
        Now style your first element using Master CSS syntax!
        ```html name=src/app/app.component.html
        <h1 class="italic m:12x fg:strong font:40 font:heavy">Hello World</h1>
        ```
        Open your browser to watch the changes.
        <HelloWorld url="localhost:3000" />
    </Step>
</StepSection>