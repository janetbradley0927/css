## Understanding all layers [sr-only]
Master CSS analyzes the syntax and inserts it into the appropriate layer, allowing you to focus on the UI without worrying about style precedence.
<LayersDefault />

Here is an example that covers all layers:
<Code lang="js" name="master.css.js">{require('./tests/overview/master.css.js?raw').default}</Code>
<Code lang="html" name="hero.html">{require('./tests/overview/template.html?raw').default}</Code>
<details>
    <summary>Generated CSS</summary>
    <Code lang="css" beautify>{require('./tests/overview/generated.css?raw').default}</Code>
</details>

- The first line defines the cascade order. Layers declared later will override earlier ones in case of conflicts.
- **Base** — rules from `@base` (e.g., `mcss list-style:none_ul@base`).
- **Theme** — rules from variables and `config.variables`.
- **Preset** — rules from `@preset` syntax (e.g., `mcss text:16_p@preset`).
- **Components** — rules from abstract components and `config.components`.
- **General** — rules from common utilities (e.g., `mcss flex`, `mcss @fade|1s`).
- All keyframes are placed at the top level.

---

## Adding base styles
To normalize browser and preset global styles for more concise-style programming, add CSS rules in the base layer.

(i) Add a CSS rule for base styles in your global CSS file
```css name=globals.css
@layer base {
    ul {
        list-style: none;
    }
}
```
Or you can add base styles with `@base` in the HTML:
<Code lang="html">{require('./tests/adding-base-styles/template.html?raw').default}</Code>
<details>
    <summary>Generated CSS</summary>
    <Code lang="css" beautify>{require('./tests/adding-base-styles/generated.css?raw').default}</Code>
</details>

In most cases, the official package, [`@master/normal.css`](/reference/normal-css), can help you normalize browser styles.

---

## Adding preset styles
To preset fonts, foreground colors, etc. based on your brand, use `@preset` to define these styles in elements.

(i) Use selectors and `@preset` to preset styles for elements and states.
<Code lang="html">{require('./tests/adding-preset-styles/template.html?raw').default}</Code>
<details>
    <summary>Generated CSS</summary>
    <Code lang="css" beautify>{require('./tests/adding-preset-styles/generated.css?raw').default}</Code>
</details>

Without `@preset`, you would have to always add `css !important` whenever you customize the same CSS property for the selected element.

(x) Don't add brand-related preset styles to the base layer.
```html
<!-- @MARK font:mono_:is(code,pre)@base -->
<body class="font:mono_:is(code,pre)@base">…</body>
```
The preset layer styles should be built on top of the base layer.

---

## Overriding component styles
You can override the [components](/guide/components) by adding general syntax, without having to prioritize rules.

For example, add `flex` to override the display declaration `inline-flex` of the button.
```html
<!-- @MARK btn flex -->
<button class="btn flex">Submit</button>
```
<details>
    <summary>Generated CSS</summary>
    ```css
    @layer base, theme, preset, components, general;

    @layer components {
        .btn {
            display: inline-flex;
            …
        }
    }

    @layer general {
        .flex {
            display: flex;
        }
    }
    ```
</details>


---

## Overriding preset styles
You can select descendants with `@preset` to preset styles, preventing component and general styles from being overwritten.

For example, set the default paragraph text size to `16` and change the text size of a specific paragraph to `24`.
<Code lang="html">{require('./tests/overriding-preset-styles/template.html?raw').default}</Code>
<details>
    <summary>Generated CSS</summary>
    <Code lang="css" beautify>{require('./tests/overriding-preset-styles/generated.css?raw').default}</Code>
</details>

This way, you can set preset styles for multiple targets at once while still being able to modify specific elements' styles as needed.

---

## Summary
By leveraging CSS cascade layers, you can structure your styles for better maintainability and prevent unwanted overrides.

If styles conflict, the order of priority: **General** > **Components** > **Theme** > **Preset** > **Base**.

### Responsibilities
1. Use the base layer for global resets and normalization.
1. Use the preset layer for brand-specific defaults.
1. Other layers are automatically generated based on your syntax and configuration.

### Best Practices
1. Create base styles via CSS files and packages instead of defining a lot of `@base` syntax.
1. Create preset styles based on base styles.
1. Create component styles based on base and preset styles.


